@{
    Layout = "";
}



<!DOCTYPE html>
<html lang='en'>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>e@site</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Styles -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/bootstrap.min.css" />

    <link rel="stylesheet" href="/js/plugins/validator/validator.css" />

    <link rel="stylesheet" type="text/css" href="/css/dripicon.css" />
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <link rel="stylesheet" type="text/css" href="/css/responsive.css" />
    <style>

        .input-group {
            position: relative;
        }

        .field-icon {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            background-color: transparent;
            border: none;
            padding: 0;
            cursor: pointer;
        }
    </style>

</head>
<body class="theme-body">

    <div class="console-login">


        <div class="login-form">
            <div class="login-form-inner">
                <div class="login-title text-center">
                    <h2>Sign In</h2>
                </div>
                    <form id="DataForm"  class="full-panel-form" action="index.html" data-toggle="validator" role="form">
                    <div class="console-form-body">
                        <div class="row">
                            <div class="col-lg-12 col-md-12">
                                <div class="form-group  has-feedback">
                                    <label>Username</label>
                                    <div class="input-group">
                                        <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-user"></i></span></div>
                                        <input id="txtUserName" type="text" class="form-control" placeholder="Email" required>
                                    </div>
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12">
                                <div class="form-group has-feedback">
                                    <label class="flex">Password </label>
                                    <!-- <a href="#" class="ml-auto small">Forget Password?</a> -->
                                    <div class="input-group">
                                        <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-key"></i></span></div>
                                        <input type="password" class="form-control" placeholder="Password" id="password-field" required>
                                        <span toggle="#password-field" class="position-absolute fa fa-fw fa-eye field-icon toggle-password" onclick="togglePasswordVisibility(this)"></span>
                                    </div>
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12">
                                <div class="form-group form-check form-check-inline">
                                    <input type="checkbox" class="form-check-input" id="remember-me-checkbox">
                                    <label class="form-check-label" for="remember-me-checkbox">Remember me</label>
                                </div>
                            </div>
                        </div>
                        <div class="con-separator con-separator--border-dashed con-separator--space-md"></div>
                        <div class="row">
                            <div class="col-lg-12 col-md-12">
                                <div class="flex">
                                    <button class="btn btn-primary btn-outline w-100" onclick="jsLogin()"  type="button">Login</button>
                                </div>
                            </div>
                        </div>
                        @* <a href="/RequestResetPassword">Reset password</a> *@
                    </div>
                </form>
            </div>
        </div>
    </div><!-- Console Login -->
    <div class="text-center footerText"><p class="text-center">Copyright© Powered by ESite.</p></div>

    <script src="~/assets/plugins/jquery/jquery.min.js"></script>
    <script src="/js/jquerymain_jquerytouch_jquerycookies.js"></script>
    <script src="/js/plugins/loader/loadingoverlay.min.js"></script>
    <!-- Bootstrap and Popper.js -->
    <script src="/js/bootstrap_popper.min.js"></script>
    <script>
        function togglePasswordVisibility(icon) {
            const passwordField = document.getElementById("password-field");
            if (passwordField.type === "password") {
                passwordField.type = "text";
                icon.classList.remove("fa-eye");
                icon.classList.add("fa-eye-slash");
            } else {
                passwordField.type = "password";
                icon.classList.remove("fa-eye-slash");
                icon.classList.add("fa-eye");
            }
        }
    </script>
    <script src="/js/plugins/toaster/jquery.toaster.js"></script>
    <script src="/js/plugins/validator/validator.min.js"></script><!-- Validator -->
    <script src="/js/script.js"></script><!-- Common Scripts -->

    <script src="~/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets/plugins/sweetalert2/sweetalert2.min.js"></script>

@* 
    <script src="/js/plugins/validator/validator.min.js"></script><!-- Validator -->
    <script src="/js/plugins/toaster/jquery.toaster.js"></script>
    <script src="/js/script.js"></script><!-- Common Scripts -->
    <script src="~/assets/plugins/jquery-ui/jquery-ui.min.js"></script>
    <script src="~/assets/plugins/jquery-validation/jquery.validate.min.js"></script>
    <!-- AdminLTE App -->
    <script src="~/assets/dist/js/adminlte.min.js"></script>
    <script src="/js/jquerymain_jquerytouch_jquerycookies.js"></script>
    <script src="/js/plugins/loader/loadingoverlay.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.11.5/validator.min.js"></script>
    <!-- Bootstrap and Popper.js -->
    <script src="/js/bootstrap_popper.min.js"></script>
    <script>
        function togglePasswordVisibility(icon) {
            const passwordField = document.getElementById("password-field");
            if (passwordField.type === "password") {
                passwordField.type = "text";
                icon.classList.remove("fa-eye");
                icon.classList.add("fa-eye-slash");
            } else {
                passwordField.type = "password";
                icon.classList.remove("fa-eye-slash");
                icon.classList.add("fa-eye");
            }
        }
    </script>
   *@
    <script>
        $(document).ready(function () {
            function disableBack() {
                window.history.forward()
            }
            window.onload = disableBack();
            window.onpageshow = function (e) {
                if (e.persisted) {
                    loader(1);
                    disableBack();
                }
            }
            $('#DataForm input').keydown(function (e) {
                if (e.keyCode == 13) {
                    jsLogin();
                }
            });
        });
        // $("#DataForm").validate({
        //     rules: {
        //         UserName: {
        //             required: true,
        //         },
        //         Password: {
        //             required: true
        //         }
        //     },
        //     //For custom messages
        //     messages: {
        //         UserName: {
        //             required: "Enter User Name",
        //         },
        //         Password: "Enter Password",
        //     },
        //     // errorElement: 'div',
        //     // errorPlacement: function (error, element) {
        //     //     var placement = $(element).data('error');
        //     //     if (placement) {
        //     //         $(placement).append(error)
        //     //     } else if (element.parent().find('div').hasClass('input-group-append')) {
        //     //         error.insertAfter(element.parent().find('div.input-group-append').parent());  // select2
        //     //     } else {
        //     //         error.insertAfter(element);
        //     //     }
        //     // }
        // });
        function jsLogin() {
            debugger;
       
            var form = $("#DataForm");
            form.validator('validate');
            var elmErr = form.find('.has-error');
            if (elmErr && elmErr.length > 0) {
                Swal.fire({
                    icon: "error",
                    title: "Oops...",
                    text: "Please Fill Username & Password",
                });
                return false;
            } else {
                loader(1);
                var model = {
                    Username: $('#txtUserName').val(),
                    Password: $('#password-field').val()
                }
                $.ajax({
                    type: "POST",
                    url: '/Login/UserLogin',
                    data: model,
                    success: function (data) {
                        if (data.status) {
                            window.location.href = data.response;
                        }
                        else {
                            loader(0);
                            Messagealert('w', data.message);
                        }
                    },
                    error: function (req, status, err) {
                        loader(0);
                        Messagealert('e', 'something went wrong' + status + err);
                    }
                })
                
                return false;
            }
            
        }
        function loader(id) {
            //1 to show and 0 to hide loader
            if (id == 1) {
                $('.myloader-container').show();
            }
            else {
                $('.myloader-container').hide();
            }
        }

        function Messagealert(type, msg) {
            if (type == "s")// s :  Success Message
            {
                //swal("Success", msg, "success");
                // Swal.fire('Success', msg, 'success')
                Swal.fire({
                    title: 'Success',
                    text: msg,
                    icon: 'success',
                    confirmButtonColor: '#28a745',
                    confirmButtonText: 'OK'
                })
            }
            else if (type == "w")// w :  Warning Message
            {
                //swal("Warning", msg, "warning");
                //Swal.fire("Warning", msg, "warning");
                Swal.fire({
                    title: 'Warning',
                    text: msg,
                    icon: 'warning',
                    confirmButtonColor: '#ffc107',
                    confirmButtonText: 'OK'
                })
            }
            else if (type == "i")// i :  Information Message
            {
                //swal("Information", msg, "info");
                //Swal.fire("Information", msg, "info");
                Swal.fire({
                    title: 'Information',
                    text: msg,
                    icon: 'info',
                    confirmButtonColor: '#17a2b8',
                    confirmButtonText: 'OK'
                })
            }
            else if (type == "e")// e :  Error Message
            {
                //swal("Error", msg, "error");
                //Swal.fire("Error", msg, "error");
                Swal.fire({
                    title: 'Error',
                    text: msg,
                    icon: 'error',
                    confirmButtonColor: '#dc3545',
                    confirmButtonText: 'OK'
                })
            }
        }
    </script>
</body>
</html>
